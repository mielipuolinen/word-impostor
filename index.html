<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />

  <title>Sanahuijari</title>
  <meta name="description" content="Sanahuijari yhdell√§ puhelimella tai tabletilla ‚Äî porukkapeli liven√§." />
  <meta name="application-name" content="Sanahuijari" />
  <meta name="generator" content="Static HTML + JS" />
  <meta name="robots" content="index,follow" />
  <meta name="referrer" content="strict-origin-when-cross-origin" />

  <meta name="theme-color" content="#0e101c" media="(prefers-color-scheme: dark)" />
  <meta name="theme-color" content="#0e101c" media="(prefers-color-scheme: light)" />

  <!-- PWA / Installability -->
  <script src="version.js"></script>

  <link rel="manifest" id="manifestLink" href="manifest.v3.0.json" />
  <link rel="icon" type="image/png" sizes="16x16" data-icon="favicon-16" href="data:," />
  <link rel="icon" type="image/png" sizes="32x32" data-icon="favicon-32" href="data:," />
  <link rel="icon" type="image/png" sizes="192x192" data-icon="icon-192" href="data:," />
  <link rel="icon" type="image/png" sizes="512x512" data-icon="icon-512" href="data:," />
  <link rel="apple-touch-icon" sizes="180x180" data-icon="apple-touch-icon" href="data:," />

  <!-- iOS / Safari (best-effort) -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Sanahuijari" />
  <meta name="format-detection" content="telephone=no" />

  <link rel="canonical" href="https://sanahuijari.fi/" />

  <!-- Open Graph (Facebook, Slack, etc.) -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="fi_FI" />
  <meta property="og:site_name" content="Sanahuijari" />
  <meta property="og:title" content="Sanahuijari" />
  <meta property="og:description" content="Sanahuijari yhdell√§ puhelimella tai tabletilla ‚Äî porukkapeli liven√§." />
  <meta property="og:url" content="https://sanahuijari.fi/" />
  <meta property="og:image" id="ogImage" content="https://sanahuijari.fi/icons/icon-512.v3.0.png" />
  <meta property="og:image:width" content="512" />
  <meta property="og:image:height" content="512" />

  <!-- Twitter / X -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Sanahuijari" />
  <meta name="twitter:description" content="Sanahuijari yhdell√§ puhelimella tai tabletilla ‚Äî porukkapeli liven√§." />
  <meta name="twitter:image" id="twitterImage" content="https://sanahuijari.fi/icons/icon-512.v3.0.png" />

  <script>
    (function(){
      const v = (globalThis.SANAHUIJARI_ICON_VERSION || "v3.0");

      // Update icon links in <head> from a single version constant.
      const setIconHref = (sel, base) => {
        const el = document.querySelector(sel);
        if(!el) return;
        el.setAttribute("href", `icons/${base}.${v}.png`);
      };
      document.querySelectorAll('link[data-icon]').forEach((el) => {
        const base = el.getAttribute('data-icon');
        if(!base) return;
        el.setAttribute('href', `icons/${base}.${v}.png`);
      });

      // Keep social previews aligned.
      const og = document.getElementById("ogImage");
      if(og) og.setAttribute("content", `https://sanahuijari.fi/icons/icon-512.${v}.png`);
      const tw = document.getElementById("twitterImage");
      if(tw) tw.setAttribute("content", `https://sanahuijari.fi/icons/icon-512.${v}.png`);

      // Manifest filename is versioned as well.
      const m = document.getElementById("manifestLink");
      if(m) m.setAttribute("href", `manifest.${v}.json`);
    })();
  </script>

  <link rel="stylesheet" href="styles.css" />
</head>

<body class="booting force-motion">
  <canvas id="snowCanvas" class="snow-canvas" aria-hidden="true"></canvas>
  <img src="data:," data-icon-src="logo" alt="" class="bg-logo" aria-hidden="true">

  <div id="bootSplash" class="boot-splash" aria-hidden="true">
    <img src="data:," data-icon-src="logo" alt="" class="boot-logo" aria-hidden="true" decoding="async" fetchpriority="high">
    <div class="boot-progress" aria-hidden="true">
      <svg class="boot-ring" viewBox="0 0 64 64" focusable="false" aria-hidden="true">
        <circle class="boot-ring-track" cx="32" cy="32" r="28"></circle>
        <circle class="boot-ring-fill" id="bootRingFill" cx="32" cy="32" r="28"></circle>
      </svg>
      <div class="boot-percent" id="bootPercent">0%</div>
      <div class="boot-version" id="bootVersion"></div>
    </div>
  </div>

  <div class="wrap" id="appRoot">
    <div class="app">
      <div class="head">
        <div class="brand">
          <h1 id="titleText">i18n:title</h1>
          <div class="tagline" id="taglineText">i18n:tagline</div>
        </div>
        <div class="lang" role="group" aria-label="i18n:language">
          <button class="langbtn" type="button" id="langEn" aria-label="i18n:lang_en" title="i18n:lang_en">üá¨üáß</button>
          <button class="langbtn" type="button" id="langFi" aria-label="i18n:lang_fi" title="i18n:lang_fi">üá´üáÆ</button>
        </div>
      </div>

      <!-- SETUP -->
      <section class="panel" id="setupPanel">
        <div class="panel-inner">
          <div class="row">
            <div class="col">
              <label id="playersLabel">i18n:players</label>
              <div class="quick" id="playerQuick" role="group" aria-label="i18n:players">
                <button class="quickbtn" type="button" data-count="3">3</button>
                <button class="quickbtn" type="button" data-count="4">4</button>
                <button class="quickbtn" type="button" data-count="5">5</button>
                <button class="quickbtn" type="button" data-count="6">6</button>
                <button class="quickbtn" type="button" data-count="custom" id="customBtn">i18n:custom</button>
              </div>
              <input id="playersInput" class="hidden" type="number" inputmode="numeric" min="3" value="3" />
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="col">
              <label id="difficultyLabel">i18n:difficulty</label>
              <div class="seg" id="difficultySeg" role="group" aria-label="i18n:difficulty">
                <button class="segbtn" type="button" data-diff="easy" id="diffEasy">i18n:diff_easy</button>
                <button class="segbtn" type="button" data-diff="medium" id="diffMedium">i18n:diff_medium</button>
                <button class="segbtn" type="button" data-diff="hard" id="diffHard">i18n:diff_hard</button>
              </div>
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="col">
              <label id="categoriesLabel">i18n:categories</label>
              <div class="chips" id="categoryChips" role="group" aria-label="i18n:categories"></div>
            </div>
          </div>

          <div class="toggles-section" style="margin-top:16px;">
            <label class="toggle" aria-label="i18n:detectiveHint">
              <input id="detectiveHintToggle" type="checkbox" />
              <span class="toggle-name" id="detectiveHintName">i18n:detectiveHint</span>
              <span class="toggle-switch"></span>
            </label>

            <label class="toggle" aria-label="i18n:impostorHint">
              <input id="impostorHintToggle" type="checkbox" checked />
              <span class="toggle-name" id="impostorHintName">i18n:impostorHint</span>
              <span class="toggle-switch"></span>
            </label>

            <label class="toggle" aria-label="i18n:impostorKnows">
              <input id="impostorKnowsToggle" type="checkbox" checked />
              <span class="toggle-name" id="impostorKnowsName">i18n:impostorKnows</span>
              <span class="toggle-switch"></span>
            </label>

            <label class="toggle" aria-label="i18n:hiddenImpostor">
              <input id="hiddenImpostorToggle" type="checkbox" />
              <span class="toggle-name" id="hiddenImpostorName">i18n:hiddenImpostor</span>
              <span class="toggle-switch"></span>
            </label>

            <label class="toggle" aria-label="i18n:showImpostorCount">
              <input id="showImpostorCountToggle" type="checkbox" />
              <span class="toggle-name" id="showImpostorCountName">i18n:showImpostorCount</span>
              <span class="toggle-switch"></span>
            </label>

            <label class="toggle" aria-label="i18n:twoImpostors">
              <input id="twoImpostorsToggle" type="checkbox" checked />
              <span class="toggle-name" id="twoImpostorsName">i18n:twoImpostors</span>
              <span class="toggle-switch"></span>
            </label>
          </div>

          <div class="btns">
            <button class="rulesbtn" id="rulesBtn" type="button">i18n:rulesBtn</button>
            <button class="rulesbtn" id="resetSettingsBtn" type="button">i18n:resetSettingsBtn</button>
            <button class="primary" id="startBtn">i18n:start</button>
          </div>
        </div>
      </section>

      <!-- DEALING -->
      <section class="panel hidden" id="dealPanel">
        <div class="panel-inner">
          <div class="topline">
            <div class="player" id="playerHeading">i18n:player(1)</div>
            <div class="progress" id="progressText" aria-live="polite">i18n:progress</div>
          </div>

          <div class="card">
            <div class="card-face" id="faceDown">
              <button class="tap" id="revealBtn">i18n:reveal</button>
            </div>

            <div class="card-face hidden" id="faceUp">
              <div class="card-title" id="cardLabel">i18n:card_word</div>
              <div class="card-main" id="cardMain">i18n:secret</div>

              <div class="hintbox hidden" id="impostorHintBox" aria-live="polite">
                <div class="label" id="impostorHintLabel">i18n:categoriesLabel</div>
                <div class="value" id="impostorHintText">i18n:cat_food</div>
              </div>

              <div class="hintbox hidden" id="impostorCountBox" aria-live="polite">
                <div class="label" id="impostorCountLabel">i18n:impostorCountLabel</div>
                <div class="value" id="impostorCountText">i18n:impostorCountHint(1)</div>
              </div>

              <div class="btns" style="margin-top:8px;">
                <button class="tap passbtn" id="closeCardBtn">i18n:close</button>
              </div>
            </div>
          </div>

          <div class="btns" style="margin-top:12px;">
            <button class="rulesbtn" id="exitGameBtn" type="button">i18n:exitGameBtn</button>
          </div>
        </div>
      </section>

      <!-- DONE -->
      <section class="panel hidden" id="donePanel">
        <div class="panel-inner">
          <div class="card">
            <div class="card-face done-face">
              <div class="done-title" id="doneText">i18n:doneTitle</div>
              <div class="done-sub" id="doneSub">i18n:doneBody</div>

              <div class="results-box hidden" id="resultsBox">
                <div class="result-item">
                  <div class="result-label" id="resultWordLabel">i18n:secretWordWas</div>
                  <div class="result-value" id="resultWord"></div>
                </div>
                <div class="result-item">
                  <div class="result-label" id="resultImpostorLabel">i18n:impostorWas</div>
                  <div class="result-value result-impostor" id="resultImpostor"></div>
                </div>
                <div class="result-item">
                  <div class="result-label" id="resultDetectiveLabel">i18n:detectivesWere</div>
                  <div class="result-value" id="resultDetective"></div>
                </div>
              </div>

              <div class="btns">
                <button id="revealResultsBtn">i18n:revealResults</button>
                <button class="primary" id="newGameBtn">i18n:newGame</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="footer">
        <div class="footertext" aria-hidden="true">
          <div class="footerline top" id="footerTop">i18n:footerTop</div>
          <div class="footerline" id="footerBottom">i18n:footerBottom</div>
        </div>
        <div class="footactions" aria-label="i18n:links">
          <button class="footbtn" type="button" id="repoBtn" aria-label="i18n:repo" title="i18n:repo">üêô</button>
          <button class="footbtn" type="button" id="selfTestBtn" aria-label="i18n:selfTest" title="i18n:selfTest">üß™</button>
        </div>
      </footer>

      <div class="toast hidden" id="toast" aria-live="polite"></div>

      <!-- RULES MODAL -->
      <div class="modal hidden" id="rulesModal" role="dialog" aria-modal="true" aria-labelledby="rulesTitle">
        <div class="modal-backdrop" id="rulesBackdrop" aria-hidden="true"></div>
        <div class="panel modal-sheet" role="document" tabindex="-1">
          <div class="modal-head">
            <div class="modal-title" id="rulesTitle">i18n:rulesTitle</div>
            <button class="modal-close" type="button" id="rulesCloseBtn" aria-label="i18n:rulesClose" title="i18n:rulesClose">√ó</button>
          </div>
          <div class="modal-body">
            <div class="rules" id="rulesBody"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="vendor/jquery-3.7.1.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
